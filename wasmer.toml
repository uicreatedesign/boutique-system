# wasmer.toml

[package]
name = "uicreatedesign/boutique-system" 
version = "0.1.0"
description = "A Laravel 12 with React.js application deployed on Wasmer Edge"

# Define the necessary dependencies (PHP runtime and Node.js)
[dependencies]
"php/php" = "=8.3.4"
"nodejs/node" = "=20.11.1"

# Map directories
[fs]
"/app/" = "."
"/app/node_modules" = "./node_modules"
"/app/public" = "./public"

# Define commands
[[command]]
name = "run"
module = "php/php:php"
runner = "wasi"

[[command]] 
name = "dev"
module = "nodejs/node:node"
runner = "wasi"

# PHP development server
[command.annotations.wasi]
main-args = ["-t", "/app/public", "-S", "localhost:8080"]

# Vite dev server for React
[[command.annotations.wasi]]
name = "dev"
main-args = ["vite"]
env = { "VITE_APP_URL" = "http://localhost:8080" }
