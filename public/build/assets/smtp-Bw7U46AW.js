import{r as i,j as s,t as x,d as S,H as v}from"./app-s6NgXo84.js";import{B as f}from"./app-logo-icon-B0fBNtIv.js";import{I as o}from"./input-DxU08Nhu.js";import{L as r}from"./label-CphVOY8c.js";import{S as P,a as F,b as M,c as E,d as _}from"./select-BjCV3DtF.js";import{H as L}from"./heading-small-B7-igSUm.js";import{I as n}from"./input-error-CjnYzPGy.js";import{A as w}from"./app-layout-MdC0vklR.js";import{S as y}from"./layout-DzPs6xqs.js";import{c as k,g as D,b as H,D as I,a as A}from"./dialog-C3gyF7XN.js";import{M as B}from"./mail-B2HvGPqf.js";import{S as O}from"./send-CKgkrUg-.js";import{S as a}from"./skeleton-CTqK9_9c.js";/* empty css            */import"./index-COLmkTQT.js";import"./index-_mjGiuzX.js";import"./index-D3q0pOp_.js";import"./check-GKsih9Bs.js";import"./index-Cm2o4msX.js";import"./index-DT9YenLd.js";function V(){const[t,c]=i.useState(!1),[d,g]=i.useState(""),[j,u]=i.useState(!1),l=async p=>{if(p.preventDefault(),!d){x.error("Please enter an email address");return}u(!0);try{await S.post("/api/settings/smtp/test",{email:d}),x.success("Test email sent successfully!"),c(!1),g("")}catch(N){x.error(N.response?.data?.message||"Failed to send test email")}finally{u(!1)}};return s.jsxs(k,{open:t,onOpenChange:c,children:[s.jsx(D,{asChild:!0,children:s.jsxs(f,{variant:"outline",size:"sm",children:[s.jsx(B,{className:"h-4 w-4 mr-2"}),"Test Email"]})}),s.jsxs(H,{className:"max-w-md",children:[s.jsx(I,{children:s.jsx(A,{children:"Send Test Email"})}),s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(r,{htmlFor:"test-email",children:"Email Address"}),s.jsx(o,{id:"test-email",type:"email",value:d,onChange:p=>g(p.target.value),placeholder:"Enter email to test",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(f,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),s.jsx(f,{type:"submit",disabled:j,children:j?"Sending...":s.jsxs(s.Fragment,{children:[s.jsx(O,{className:"h-4 w-4 mr-2"}),"Send Test"]})})]})]})]})]})}const T=[{title:"SMTP Settings",href:"/settings/smtp"}];function ms(){const[t,c]=i.useState({smtp_host:"",smtp_port:"587",smtp_username:"",smtp_password:"",smtp_encryption:"tls",mail_from_address:"",mail_from_name:""}),[d,g]=i.useState(!1),[j,u]=i.useState(!0),[l,p]=i.useState({});i.useEffect(()=>{N()},[]);const N=async()=>{try{const e=await S.get("/api/settings/smtp");c(e.data)}catch(e){console.error("Failed to fetch SMTP settings:",e)}finally{u(!1)}},b=async e=>{e.preventDefault(),g(!0),p({});try{await S.put("/api/settings/smtp",t),x.success("SMTP settings updated successfully")}catch(h){h.response?.data?.errors&&p(h.response.data.errors),x.error("Failed to update SMTP settings"),console.error("Failed to update SMTP settings:",h)}finally{g(!1)}},m=(e,h)=>{c(C=>({...C,[e]:h}))};return j?s.jsxs(w,{breadcrumbs:T,children:[s.jsx(v,{title:"SMTP Settings"}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{className:"h-7 w-32"}),s.jsx(a,{className:"h-4 w-80"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-28"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-28"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(a,{className:"h-10 w-16"}),s.jsx(a,{className:"h-10 w-24"})]})]})]})})]}):s.jsxs(w,{breadcrumbs:T,children:[s.jsx(v,{title:"SMTP Settings"}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(L,{title:"SMTP Settings",description:"Configure email server settings for sending emails"}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_host",children:"SMTP Host"}),s.jsx(o,{id:"smtp_host",value:t.smtp_host,onChange:e=>m("smtp_host",e.target.value),placeholder:"smtp.gmail.com",className:"mt-1 block w-full"}),s.jsx(n,{message:l.smtp_host?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_port",children:"SMTP Port"}),s.jsx(o,{id:"smtp_port",type:"number",value:t.smtp_port,onChange:e=>m("smtp_port",e.target.value),placeholder:"587",className:"mt-1 block w-full"}),s.jsx(n,{message:l.smtp_port?.[0]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_username",children:"SMTP Username"}),s.jsx(o,{id:"smtp_username",value:t.smtp_username,onChange:e=>m("smtp_username",e.target.value),placeholder:"your-email@gmail.com",className:"mt-1 block w-full"}),s.jsx(n,{message:l.smtp_username?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_password",children:"SMTP Password"}),s.jsx(o,{id:"smtp_password",type:"password",value:t.smtp_password,onChange:e=>m("smtp_password",e.target.value),placeholder:"Your app password",className:"mt-1 block w-full",autoComplete:"current-password"}),s.jsx(n,{message:l.smtp_password?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_encryption",children:"Encryption"}),s.jsxs(P,{value:t.smtp_encryption,onValueChange:e=>m("smtp_encryption",e),children:[s.jsx(F,{className:"mt-1 block w-full",children:s.jsx(M,{})}),s.jsxs(E,{children:[s.jsx(_,{value:"tls",children:"TLS"}),s.jsx(_,{value:"ssl",children:"SSL"}),s.jsx(_,{value:"none",children:"None"})]})]}),s.jsx(n,{message:l.smtp_encryption?.[0]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"mail_from_address",children:"From Email"}),s.jsx(o,{id:"mail_from_address",type:"email",value:t.mail_from_address,onChange:e=>m("mail_from_address",e.target.value),placeholder:"noreply@yoursite.com",className:"mt-1 block w-full"}),s.jsx(n,{message:l.mail_from_address?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"mail_from_name",children:"From Name"}),s.jsx(o,{id:"mail_from_name",value:t.mail_from_name,onChange:e=>m("mail_from_name",e.target.value),placeholder:"Your Company",className:"mt-1 block w-full"}),s.jsx(n,{message:l.mail_from_name?.[0]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(f,{type:"submit",disabled:d,children:d?"Saving...":"Save"}),s.jsx(V,{})]})]})]})})]})}export{ms as default};
