import{c as ve,r as he,j as r,F as Ce,e as De,u as Ee,L as Qe,a as xe,H as Pe}from"./app-D1M_B6wg.js";import{s as qe}from"./index-DZxzsgmi.js";import{q as ne}from"./index-C4J_hXM0.js";import{H as je}from"./heading-small-CVpOO1MZ.js";import{I as pe}from"./input-error--kKThWQ3.js";import{B as G}from"./app-logo-icon-yTyd5oOw.js";import{c as Fe,b as ke,f as Ae,e as Le,g as Te,a as Ie,d as He}from"./dialog-C2sRyM5w.js";import{I as ye}from"./input-rjoclcG0.js";import{L as oe}from"./label-Yb2j9zTT.js";import{d as Re,M as Ue,e as ze,b as $e,A as Be,L as Ge}from"./app-layout-BZYp4Z8G.js";import{S as Me}from"./layout-DzF-Ozho.js";import{T as Oe}from"./trash-2-Bba0izHt.js";import{C as Je}from"./camera-k-9n8hEb.js";import{z as Ve}from"./transition-ChLtFrYK.js";/* empty css            */import"./index-DybFZJ7t.js";import"./index-C3Go7AOw.js";import"./index-DZZlyDoJ.js";const i=t=>({url:i.url(t),method:"get"});i.definition={methods:["get","head"],url:"/settings/profile"};i.url=t=>i.definition.url+ne(t);i.get=t=>({url:i.url(t),method:"get"});i.head=t=>({url:i.url(t),method:"head"});const ge=t=>({action:i.url(t),method:"get"});ge.get=t=>({action:i.url(t),method:"get"});ge.head=t=>({action:i.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});i.form=ge;const o=t=>({url:o.url(t),method:"patch"});o.definition={methods:["patch"],url:"/settings/profile"};o.url=t=>o.definition.url+ne(t);o.patch=t=>({url:o.url(t),method:"patch"});const _e=t=>({action:o.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});_e.patch=t=>({action:o.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});o.form=_e;const n=t=>({url:n.url(t),method:"delete"});n.definition={methods:["delete"],url:"/settings/profile"};n.url=t=>n.definition.url+ne(t);n.delete=t=>({url:n.url(t),method:"delete"});const be=t=>({action:n.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});be.delete=t=>({action:n.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});n.form=be;const m=t=>({url:m.url(t),method:"delete"});m.definition={methods:["delete"],url:"/settings/profile/avatar"};m.url=t=>m.definition.url+ne(t);m.delete=t=>({url:m.url(t),method:"delete"});const Ne=t=>({action:m.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});Ne.delete=t=>({action:m.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});m.form=Ne;const We={edit:i,update:o,destroy:n,removeAvatar:m};function Ye(){const t=ve.c(9),e=he.useRef(null);let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(je,{title:"Delete account",description:"Delete your account and all of its resources"}),t[0]=d):d=t[0];let f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsxs("div",{className:"relative space-y-0.5 text-red-600 dark:text-red-100",children:[r.jsx("p",{className:"font-medium",children:"Warning"}),r.jsx("p",{className:"text-sm",children:"Please proceed with caution, this cannot be undone."})]}),t[1]=f):f=t[1];let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(Te,{asChild:!0,children:r.jsx(G,{variant:"destructive","data-test":"delete-user-button",children:"Delete account"})}),t[2]=a):a=t[2];let h,v;t[3]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(Ie,{children:"Are you sure you want to delete your account?"}),v=r.jsx(He,{children:"Once your account is deleted, all of its resources and data will also be permanently deleted. Please enter your password to confirm you would like to permanently delete your account."}),t[3]=h,t[4]=v):(h=t[3],v=t[4]);let p,g,c;t[5]===Symbol.for("react.memo_cache_sentinel")?(p=We.destroy(),g={preserveScroll:!0},c=()=>e.current?.focus(),t[5]=p,t[6]=g,t[7]=c):(p=t[5],g=t[6],c=t[7]);let s;return t[8]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsxs("div",{className:"space-y-6",children:[d,r.jsxs("div",{className:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10",children:[f,r.jsxs(Fe,{children:[a,r.jsxs(ke,{children:[h,v,r.jsx(Ce,{...p,options:g,onError:c,resetOnSuccess:!0,className:"space-y-6",children:l=>{const{resetAndClearErrors:M,processing:y,errors:O}=l;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(oe,{htmlFor:"password",className:"sr-only",children:"Password"}),r.jsx(ye,{id:"password",type:"password",name:"password",ref:e,placeholder:"Password",autoComplete:"current-password"}),r.jsx(pe,{message:O.password})]}),r.jsxs(Ae,{className:"gap-2",children:[r.jsx(Le,{asChild:!0,children:r.jsx(G,{variant:"secondary",onClick:()=>M(),children:"Cancel"})}),r.jsx(G,{variant:"destructive",disabled:y,asChild:!0,children:r.jsx("button",{type:"submit","data-test":"confirm-delete-user-button",children:"Delete account"})})]})]})}})]})]})]})]}),t[8]=s):s=t[8],s}const Ke=[{title:"Profile settings",href:Ge().url}];function yt(t){const e=ve.c(92),{mustVerifyEmail:d,status:f}=t,{auth:a}=De().props,h=Ue(),[v,p]=he.useState(null),g=he.useRef(null);let c;e[0]!==a.user.email||e[1]!==a.user.name?(c={name:a.user.name,email:a.user.email,avatar:null},e[0]=a.user.email,e[1]=a.user.name,e[2]=c):c=e[2];const{data:s,setData:l,processing:M,errors:y,recentlySuccessful:O}=Ee(c);let J;e[3]!==l?(J=x=>{const u=x.target.files?.[0];if(u){l("avatar",u);const we=URL.createObjectURL(u);p(we)}},e[3]=l,e[4]=J):J=e[4];const me=J;let V;e[5]!==l?(V=()=>{xe.delete("/settings/profile/avatar",{preserveScroll:!0,onSuccess:()=>{l("avatar",null),p(null)}})},e[5]=l,e[6]=V):V=e[6];const ce=V;let W;e[7]!==s.avatar||e[8]!==s.email||e[9]!==s.name||e[10]!==l?(W=x=>{x.preventDefault();const u=new FormData;u.append("name",s.name),u.append("email",s.email),u.append("_method","PATCH"),s.avatar&&u.append("avatar",s.avatar),xe.post("/settings/profile",u,{preserveScroll:!0,onSuccess:()=>{l("avatar",null),p(null)}})},e[7]=s.avatar,e[8]=s.email,e[9]=s.name,e[10]=l,e[11]=W):W=e[11];const ue=W,Se=v||(a.user.avatar?`/storage/${a.user.avatar}`:null);let Y;e[12]===Symbol.for("react.memo_cache_sentinel")?(Y=r.jsx(Pe,{title:"Profile settings"}),e[12]=Y):Y=e[12];let K;e[13]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(je,{title:"Profile information",description:"Update your profile picture, name and email address"}),e[13]=K):K=e[13];let X;e[14]===Symbol.for("react.memo_cache_sentinel")?(X=r.jsx(oe,{children:"Profile Picture"}),e[14]=X):X=e[14];const de=Se||void 0;let j;e[15]!==a.user.name||e[16]!==de?(j=r.jsx(Re,{src:de,alt:a.user.name}),e[15]=a.user.name,e[16]=de,e[17]=j):j=e[17];let _;e[18]!==a.user.name||e[19]!==h?(_=h(a.user.name),e[18]=a.user.name,e[19]=h,e[20]=_):_=e[20];let b;e[21]!==_?(b=r.jsx(ze,{className:"text-lg",children:_}),e[21]=_,e[22]=b):b=e[22];let N;e[23]!==b||e[24]!==j?(N=r.jsxs($e,{className:"h-20 w-20",children:[j,b]}),e[23]=b,e[24]=j,e[25]=N):N=e[25];let Z,ee;e[26]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>g.current?.click(),ee=r.jsx(Je,{className:"h-4 w-4 mr-2"}),e[26]=Z,e[27]=ee):(Z=e[26],ee=e[27]);const fe=a.user.avatar?"Change":"Upload";let S;e[28]!==fe?(S=r.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:Z,children:[ee,fe]}),e[28]=fe,e[29]=S):S=e[29];let w;e[30]!==a.user.avatar||e[31]!==s.avatar||e[32]!==ce?(w=(a.user.avatar||s.avatar)&&r.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:ce,children:[r.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Remove"]}),e[30]=a.user.avatar,e[31]=s.avatar,e[32]=ce,e[33]=w):w=e[33];let C;e[34]!==S||e[35]!==w?(C=r.jsxs("div",{className:"flex gap-2",children:[S,w]}),e[34]=S,e[35]=w,e[36]=C):C=e[36];let D;e[37]!==N||e[38]!==C?(D=r.jsxs("div",{className:"flex items-center gap-4",children:[N,C]}),e[37]=N,e[38]=C,e[39]=D):D=e[39];let E;e[40]!==me?(E=r.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:me,className:"hidden"}),e[40]=me,e[41]=E):E=e[41];let te;e[42]===Symbol.for("react.memo_cache_sentinel")?(te=r.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG or GIF. Max size 2MB."}),e[42]=te):te=e[42];let Q;e[43]!==D||e[44]!==E?(Q=r.jsxs("div",{className:"space-y-4",children:[X,D,E,te]}),e[43]=D,e[44]=E,e[45]=Q):Q=e[45];let re;e[46]===Symbol.for("react.memo_cache_sentinel")?(re=r.jsx(oe,{htmlFor:"name",children:"Name"}),e[46]=re):re=e[46];let P;e[47]!==l?(P=x=>l("name",x.target.value),e[47]=l,e[48]=P):P=e[48];let q;e[49]!==s.name||e[50]!==P?(q=r.jsx(ye,{id:"name",className:"mt-1 block w-full",value:s.name,onChange:P,name:"name",required:!0,autoComplete:"name",placeholder:"Full name"}),e[49]=s.name,e[50]=P,e[51]=q):q=e[51];let F;e[52]!==y.name?(F=r.jsx(pe,{className:"mt-2",message:y.name}),e[52]=y.name,e[53]=F):F=e[53];let k;e[54]!==q||e[55]!==F?(k=r.jsxs("div",{className:"grid gap-2",children:[re,q,F]}),e[54]=q,e[55]=F,e[56]=k):k=e[56];let ae;e[57]===Symbol.for("react.memo_cache_sentinel")?(ae=r.jsx(oe,{htmlFor:"email",children:"Email address"}),e[57]=ae):ae=e[57];let A;e[58]!==l?(A=x=>l("email",x.target.value),e[58]=l,e[59]=A):A=e[59];let L;e[60]!==s.email||e[61]!==A?(L=r.jsx(ye,{id:"email",type:"email",className:"mt-1 block w-full",value:s.email,onChange:A,name:"email",required:!0,autoComplete:"username",placeholder:"Email address"}),e[60]=s.email,e[61]=A,e[62]=L):L=e[62];let T;e[63]!==y.email?(T=r.jsx(pe,{className:"mt-2",message:y.email}),e[63]=y.email,e[64]=T):T=e[64];let I;e[65]!==L||e[66]!==T?(I=r.jsxs("div",{className:"grid gap-2",children:[ae,L,T]}),e[65]=L,e[66]=T,e[67]=I):I=e[67];let H;e[68]!==a.user.email_verified_at||e[69]!==d||e[70]!==f?(H=d&&a.user.email_verified_at===null&&r.jsxs("div",{children:[r.jsxs("p",{className:"-mt-4 text-sm text-muted-foreground",children:["Your email address is unverified."," ",r.jsx(Qe,{href:qe(),as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",children:"Click here to resend the verification email."})]}),f==="verification-link-sent"&&r.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})]}),e[68]=a.user.email_verified_at,e[69]=d,e[70]=f,e[71]=H):H=e[71];let R;e[72]!==M?(R=r.jsx(G,{disabled:M,"data-test":"update-profile-button",children:"Save"}),e[72]=M,e[73]=R):R=e[73];let se;e[74]===Symbol.for("react.memo_cache_sentinel")?(se=r.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"}),e[74]=se):se=e[74];let U;e[75]!==O?(U=r.jsx(Ve,{show:O,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:se}),e[75]=O,e[76]=U):U=e[76];let z;e[77]!==R||e[78]!==U?(z=r.jsxs("div",{className:"flex items-center gap-4",children:[R,U]}),e[77]=R,e[78]=U,e[79]=z):z=e[79];let $;e[80]!==ue||e[81]!==k||e[82]!==I||e[83]!==H||e[84]!==z?($=r.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[k,I,H,z]}),e[80]=ue,e[81]=k,e[82]=I,e[83]=H,e[84]=z,e[85]=$):$=e[85];let B;e[86]!==Q||e[87]!==$?(B=r.jsxs("div",{className:"space-y-6",children:[K,Q,$]}),e[86]=Q,e[87]=$,e[88]=B):B=e[88];let le;e[89]===Symbol.for("react.memo_cache_sentinel")?(le=r.jsx(Ye,{}),e[89]=le):le=e[89];let ie;return e[90]!==B?(ie=r.jsxs(Be,{breadcrumbs:Ke,children:[Y,r.jsxs(Me,{children:[B,le]})]}),e[90]=B,e[91]=ie):ie=e[91],ie}export{yt as default};
