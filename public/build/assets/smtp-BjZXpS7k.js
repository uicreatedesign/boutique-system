import{b as M,r as i,j as s,t as x,d as S,H as v}from"./app-SG5kOH_X.js";import{B as f}from"./app-logo-icon-Dz-0iVEl.js";import{I as o}from"./input-rkZVFfFn.js";import{L as r}from"./label-Dr95cb8O.js";import{S as P,a as F,b as E,c as k,d as _}from"./select-jIWFUsPL.js";import{H as L}from"./heading-small-im1l98bD.js";import{I as n}from"./input-error-BdsxhE6r.js";import{A as w}from"./app-layout-Bcr1Tlge.js";import{S as y}from"./layout-uzvcR7Nf.js";import{c as D,g as H,b as I,D as A,a as z}from"./dialog-CmDFXhvi.js";import{M as B}from"./mail-DL6CDT18.js";import{S as a}from"./skeleton-Czy-qgcW.js";/* empty css            */import"./index-DJFLLwEA.js";import"./index-CUgtGy35.js";import"./index-pmHSJmjl.js";import"./check-D0w8CGYY.js";import"./index-C4J_hXM0.js";import"./index-DZZlyDoJ.js";const O=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],V=M("Send",O);function Y(){const[t,c]=i.useState(!1),[d,h]=i.useState(""),[j,u]=i.useState(!1),l=async p=>{if(p.preventDefault(),!d){x.error("Please enter an email address");return}u(!0);try{await S.post("/api/settings/smtp/test",{email:d}),x.success("Test email sent successfully!"),c(!1),h("")}catch(N){x.error(N.response?.data?.message||"Failed to send test email")}finally{u(!1)}};return s.jsxs(D,{open:t,onOpenChange:c,children:[s.jsx(H,{asChild:!0,children:s.jsxs(f,{variant:"outline",size:"sm",children:[s.jsx(B,{className:"h-4 w-4 mr-2"}),"Test Email"]})}),s.jsxs(I,{className:"max-w-md",children:[s.jsx(A,{children:s.jsx(z,{children:"Send Test Email"})}),s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(r,{htmlFor:"test-email",children:"Email Address"}),s.jsx(o,{id:"test-email",type:"email",value:d,onChange:p=>h(p.target.value),placeholder:"Enter email to test",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(f,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),s.jsx(f,{type:"submit",disabled:j,children:j?"Sending...":s.jsxs(s.Fragment,{children:[s.jsx(V,{className:"h-4 w-4 mr-2"}),"Send Test"]})})]})]})]})]})}const b=[{title:"SMTP Settings",href:"/settings/smtp"}];function ns(){const[t,c]=i.useState({smtp_host:"",smtp_port:"587",smtp_username:"",smtp_password:"",smtp_encryption:"tls",mail_from_address:"",mail_from_name:""}),[d,h]=i.useState(!1),[j,u]=i.useState(!0),[l,p]=i.useState({});i.useEffect(()=>{N()},[]);const N=async()=>{try{const e=await S.get("/api/settings/smtp");c(e.data)}catch(e){console.error("Failed to fetch SMTP settings:",e)}finally{u(!1)}},T=async e=>{e.preventDefault(),h(!0),p({});try{await S.put("/api/settings/smtp",t),x.success("SMTP settings updated successfully")}catch(g){g.response?.data?.errors&&p(g.response.data.errors),x.error("Failed to update SMTP settings"),console.error("Failed to update SMTP settings:",g)}finally{h(!1)}},m=(e,g)=>{c(C=>({...C,[e]:g}))};return j?s.jsxs(w,{breadcrumbs:b,children:[s.jsx(v,{title:"SMTP Settings"}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{className:"h-7 w-32"}),s.jsx(a,{className:"h-4 w-80"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-28"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-28"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-10 w-full"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(a,{className:"h-10 w-16"}),s.jsx(a,{className:"h-10 w-24"})]})]})]})})]}):s.jsxs(w,{breadcrumbs:b,children:[s.jsx(v,{title:"SMTP Settings"}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(L,{title:"SMTP Settings",description:"Configure email server settings for sending emails"}),s.jsxs("form",{onSubmit:T,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_host",children:"SMTP Host"}),s.jsx(o,{id:"smtp_host",value:t.smtp_host,onChange:e=>m("smtp_host",e.target.value),placeholder:"smtp.gmail.com",className:"mt-1 block w-full"}),s.jsx(n,{message:l.smtp_host?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_port",children:"SMTP Port"}),s.jsx(o,{id:"smtp_port",type:"number",value:t.smtp_port,onChange:e=>m("smtp_port",e.target.value),placeholder:"587",className:"mt-1 block w-full"}),s.jsx(n,{message:l.smtp_port?.[0]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_username",children:"SMTP Username"}),s.jsx(o,{id:"smtp_username",value:t.smtp_username,onChange:e=>m("smtp_username",e.target.value),placeholder:"your-email@gmail.com",className:"mt-1 block w-full"}),s.jsx(n,{message:l.smtp_username?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_password",children:"SMTP Password"}),s.jsx(o,{id:"smtp_password",type:"password",value:t.smtp_password,onChange:e=>m("smtp_password",e.target.value),placeholder:"Your app password",className:"mt-1 block w-full",autoComplete:"current-password"}),s.jsx(n,{message:l.smtp_password?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"smtp_encryption",children:"Encryption"}),s.jsxs(P,{value:t.smtp_encryption,onValueChange:e=>m("smtp_encryption",e),children:[s.jsx(F,{className:"mt-1 block w-full",children:s.jsx(E,{})}),s.jsxs(k,{children:[s.jsx(_,{value:"tls",children:"TLS"}),s.jsx(_,{value:"ssl",children:"SSL"}),s.jsx(_,{value:"none",children:"None"})]})]}),s.jsx(n,{message:l.smtp_encryption?.[0]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"mail_from_address",children:"From Email"}),s.jsx(o,{id:"mail_from_address",type:"email",value:t.mail_from_address,onChange:e=>m("mail_from_address",e.target.value),placeholder:"noreply@yoursite.com",className:"mt-1 block w-full"}),s.jsx(n,{message:l.mail_from_address?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(r,{htmlFor:"mail_from_name",children:"From Name"}),s.jsx(o,{id:"mail_from_name",value:t.mail_from_name,onChange:e=>m("mail_from_name",e.target.value),placeholder:"Your Company",className:"mt-1 block w-full"}),s.jsx(n,{message:l.mail_from_name?.[0]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(f,{type:"submit",disabled:d,children:d?"Saving...":"Save"}),s.jsx(Y,{})]})]})]})})]})}export{ns as default};
