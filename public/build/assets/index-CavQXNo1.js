import{d as te,j as e,r as d,t as E,c as le,e as re,H as ie,a as ce}from"./app-Mxlfcwve.js";import{B as M,S as ne,A as oe}from"./app-layout-BTIkFZTX.js";import{B as S}from"./app-logo-icon-X0fn9ruW.js";import{I as b}from"./input-UQDDvGgc.js";import{c as X,a as J,C as W,b as K}from"./card-BfbNp58h.js";import{c as V,b as B,D as ee,a as U,d as de,f as me,e as he}from"./dialog-DsKLSXAl.js";import{u as xe,a as ue,o as je,s as y,l as P,c as pe,_ as se}from"./schemas-CztKi_xL.js";import{L as j}from"./label-BjjVFiP8.js";import{T as fe}from"./textarea-h4LAysyZ.js";import{S as G,a as Q,b as Y,c as Z,d as p}from"./select-Fis5kI9r.js";import{C as ge}from"./checkbox-B9wfG8we.js";import{S as f}from"./skeleton-CqqFJILY.js";import{E as ve}from"./eye-a5GeAZMQ.js";import{S as Ne}from"./square-pen-DB3EiBaA.js";import{T as ye}from"./trash-2-Cl2kuSMs.js";import{P as be}from"./plus-BcmydkID.js";/* empty css            */import"./index-BCIvWMNn.js";import"./index-DfN43n98.js";import"./index-C4J_hXM0.js";import"./index-B5WPJv-c.js";import"./check-BDdoz-7d.js";const z=te.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});z.interceptors.request.use(s=>{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return r&&(s.headers["X-CSRF-TOKEN"]=r),s});const Se=s=>z.get("/tailors",{params:s}),_e=s=>z.post("/tailors",s),we=(s,r)=>z.put(`/tailors/${s}`,r),Te=s=>z.delete(`/tailors/${s}`),Ce=s=>z.get(`/tailors/${s}`),ke=je({name:y().min(1,"Name is required").max(191),phone:y().min(1,"Phone is required").max(20),email:y().email("Invalid email").max(191).optional().or(P("")),skill_level:se(["beginner","intermediate","expert"]),address:y().optional().or(P("")),status:se(["active","inactive","on_leave"]),hourly_rate:y().optional().or(P("")),specialization:y().optional().or(P("")),join_date:y().optional().or(P("")),create_user_account:pe().optional(),password:y().min(8).optional().or(P(""))});function ae({onSubmit:s,loading:r,initialData:m}){const{register:t,handleSubmit:c,setValue:i,watch:n,formState:{errors:a}}=xe({resolver:ue(ke),defaultValues:{skill_level:"intermediate",status:"active",create_user_account:!1,...m}}),x=n("skill_level"),u=n("status"),o=n("create_user_account");return e.jsxs("form",{onSubmit:c(s),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"name",children:"Name *"}),e.jsx(b,{id:"name",...t("name"),className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"phone",children:"Phone *"}),e.jsx(b,{id:"phone",...t("phone"),className:a.phone?"border-red-500":""}),a.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone.message})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(b,{id:"email",type:"email",...t("email"),className:a.email?"border-red-500":""}),a.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"skill_level",children:"Skill Level *"}),e.jsxs(G,{value:x,onValueChange:h=>i("skill_level",h),children:[e.jsx(Q,{className:a.skill_level?"border-red-500":"",children:e.jsx(Y,{placeholder:"Select skill level"})}),e.jsxs(Z,{children:[e.jsx(p,{value:"beginner",children:"Beginner"}),e.jsx(p,{value:"intermediate",children:"Intermediate"}),e.jsx(p,{value:"expert",children:"Expert"})]})]}),a.skill_level&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.skill_level.message})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"status",children:"Status *"}),e.jsxs(G,{value:u,onValueChange:h=>i("status",h),children:[e.jsx(Q,{className:a.status?"border-red-500":"",children:e.jsx(Y,{placeholder:"Select status"})}),e.jsxs(Z,{children:[e.jsx(p,{value:"active",children:"Active"}),e.jsx(p,{value:"inactive",children:"Inactive"}),e.jsx(p,{value:"on_leave",children:"On Leave"})]})]}),a.status&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.status.message})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"hourly_rate",children:"Hourly Rate ($)"}),e.jsx(b,{id:"hourly_rate",type:"number",step:"0.01",...t("hourly_rate"),className:a.hourly_rate?"border-red-500":""}),a.hourly_rate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.hourly_rate.message})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"join_date",children:"Join Date"}),e.jsx(b,{id:"join_date",type:"date",...t("join_date"),className:a.join_date?"border-red-500":""}),a.join_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.join_date.message})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"specialization",children:"Specialization"}),e.jsx(b,{id:"specialization",placeholder:"e.g., Wedding dresses, Suits, Alterations",...t("specialization"),className:a.specialization?"border-red-500":""}),a.specialization&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.specialization.message})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"address",children:"Address"}),e.jsx(fe,{id:"address",...t("address"),className:a.address?"border-red-500":""}),a.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.address.message})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 border-t pt-4",children:[e.jsx(ge,{id:"create_user_account",checked:o,onCheckedChange:h=>i("create_user_account",h)}),e.jsx("label",{htmlFor:"create_user_account",className:"text-sm cursor-pointer",children:"Create user account for tailor dashboard access"})]}),o&&e.jsxs("div",{children:[e.jsx(j,{htmlFor:"password",children:"Password *"}),e.jsx(b,{id:"password",type:"password",...t("password"),className:a.password?"border-red-500":""}),a.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.password.message})]})]}),e.jsx(S,{type:"submit",disabled:r,className:"w-full",children:r?"Saving...":"Save Tailor"})]})}function De({tailor:s,open:r,onClose:m,onSuccess:t}){const[c,i]=d.useState(!1),n=async a=>{try{i(!0),await we(s.id,a),E.success(`${s.name} updated successfully`),t()}catch(x){console.error("Failed to update tailor:",x),E.error("Failed to update tailor. Please try again.")}finally{i(!1)}};return e.jsx(V,{open:r,onOpenChange:m,children:e.jsxs(B,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"tailor-edit-description",children:[e.jsx(ee,{children:e.jsx(U,{children:"Edit Tailor"})}),e.jsx("div",{id:"tailor-edit-description",className:"sr-only",children:"Form to edit tailor information"}),e.jsx(ae,{onSubmit:n,loading:c,initialData:s})]})})}function Fe({tailor:s,open:r,onClose:m}){const[t,c]=d.useState(null),[i,n]=d.useState(!0);d.useEffect(()=>{r&&s&&a()},[r,s]);const a=async()=>{try{const o=await Ce(s.id);c(o.data)}catch(o){console.error("Failed to fetch tailor detail:",o)}finally{n(!1)}},x=o=>{switch(o){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},u=o=>{switch(o){case"expert":return"bg-purple-100 text-purple-800";case"intermediate":return"bg-blue-100 text-blue-800";case"beginner":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx(V,{open:r,onOpenChange:m,children:e.jsxs(B,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","aria-describedby":"tailor-detail-description",children:[e.jsx(ee,{children:e.jsx(U,{children:"Tailor Details"})}),e.jsx("div",{id:"tailor-detail-description",className:"sr-only",children:"Detailed view of tailor information"}),i?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(X,{children:[e.jsx(J,{children:e.jsx(W,{children:"Personal Information"})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",t?.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",t?.phone]}),t?.email&&e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),t?.address&&e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",t.address]}),t?.join_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Join Date:"})," ",new Date(t.join_date).toLocaleDateString()]})]})]}),e.jsxs(X,{children:[e.jsx(J,{children:e.jsx(W,{children:"Professional Details"})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Skill Level:"}),e.jsx(M,{className:u(t?.skill_level||""),children:t?.skill_level})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Status:"}),e.jsx(M,{className:x(t?.status||""),children:t?.status.replace("_"," ")})]}),t?.hourly_rate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Hourly Rate:"})," $",t.hourly_rate,"/hr"]}),t?.specialization&&e.jsxs("div",{children:[e.jsx("strong",{children:"Specialization:"})," ",t.specialization]})]})]})]})]})})}function Le({tailor:s,open:r,onClose:m,onSuccess:t}){const[c,i]=d.useState(!1),n=async()=>{if(s)try{i(!0),await Te(s.id),E.success(`${s.name} has been successfully deleted`),t(),m()}catch(a){console.error("Failed to delete tailor:",a),E.error("Failed to delete tailor. Please try again.")}finally{i(!1)}};return e.jsx(V,{open:r,onOpenChange:m,children:e.jsxs(B,{"aria-describedby":"delete-tailor-description",children:[e.jsx(U,{children:"Are you sure you want to delete this tailor?"}),e.jsxs(de,{id:"delete-tailor-description",children:["Once deleted, all of ",s?.name,"'s data will be permanently removed. This action cannot be undone."]}),e.jsxs(me,{className:"gap-2",children:[e.jsx(he,{asChild:!0,children:e.jsx(S,{variant:"secondary",children:"Cancel"})}),e.jsx(S,{variant:"destructive",disabled:c,onClick:n,children:c?"Deleting...":"Delete Tailor"})]})]})})}function Ae({search:s,statusFilter:r}){const[m,t]=d.useState([]),[c,i]=d.useState(!0),[n,a]=d.useState(null),[x,u]=d.useState(null),[o,h]=d.useState(null),g=async()=>{try{i(!0);const l={search:s};r&&r!=="all"&&(l.status=r);const N=await Se(l);t(N.data.data)}catch(l){console.error("Failed to fetch tailors:",l)}finally{i(!1)}};d.useEffect(()=>{const l=setTimeout(()=>{g()},300);return()=>clearTimeout(l)},[s,r]);const v=l=>{switch(l){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},_=l=>{switch(l){case"expert":return"bg-purple-100 text-purple-800";case"intermediate":return"bg-blue-100 text-blue-800";case"beginner":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return c?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Skill Level"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Hourly Rate"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:[...Array(5)].map((l,N)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-5 w-32"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{className:"h-4 w-28"}),e.jsx(f,{className:"h-4 w-36"})]})}),e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-6 w-24"})}),e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-6 w-20"})}),e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{className:"h-9 w-9"}),e.jsx(f,{className:"h-9 w-9"}),e.jsx(f,{className:"h-9 w-9"})]})})]},N))})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Skill Level"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Hourly Rate"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:m.map(l=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[e.jsx("td",{className:"p-4 font-medium",children:l.name}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm",children:l.phone}),l.email&&e.jsx("div",{className:"text-sm text-gray-600",children:l.email})]})}),e.jsx("td",{className:"p-4",children:e.jsx(M,{className:_(l.skill_level),children:l.skill_level})}),e.jsx("td",{className:"p-4",children:e.jsx(M,{className:v(l.status),children:l.status.replace("_"," ")})}),e.jsx("td",{className:"p-4 text-sm",children:l.hourly_rate?`$${l.hourly_rate}/hr`:"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>u(l),children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>a(l),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>h(l),children:e.jsx(ye,{className:"h-4 w-4"})})]})})]},l.id))})]})}),n&&e.jsx(De,{tailor:n,open:!!n,onClose:()=>a(null),onSuccess:()=>{a(null),g()}}),x&&e.jsx(Fe,{tailor:x,open:!!x,onClose:()=>u(null)}),e.jsx(Le,{tailor:o,open:!!o,onClose:()=>h(null),onSuccess:()=>{h(null),g()}})]})}function Pe({open:s,onClose:r}){const[m,t]=d.useState(!1),c=async i=>{try{t(!0),await _e(i),E.success("Tailor created successfully"),r(),window.location.reload()}catch(n){console.error("Failed to create tailor:",n),E.error("Failed to create tailor. Please try again.")}finally{t(!1)}};return e.jsx(V,{open:s,onOpenChange:r,children:e.jsxs(B,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"tailor-create-description",children:[e.jsx(ee,{children:e.jsx(U,{children:"Add New Tailor"})}),e.jsx("div",{id:"tailor-create-description",className:"sr-only",children:"Form to create a new tailor"}),e.jsx(ae,{onSubmit:c,loading:m})]})})}function as(){const s=le.c(37),{url:r}=re(),m=new URLSearchParams(window.location.search),[t,c]=d.useState(!1),[i,n]=d.useState(m.get("search")||""),[a,x]=d.useState("");let u;s[0]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const A=new URLSearchParams(window.location.search).get("search");A&&n(A)},s[0]=u):u=s[0];let o;s[1]!==r?(o=[r],s[1]=r,s[2]=o):o=s[2],d.useEffect(u,o);let h;s[3]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsx(ie,{title:"Tailors"}),s[3]=h):h=s[3];let g;s[4]===Symbol.for("react.memo_cache_sentinel")?(g=e.jsx("h1",{className:"text-3xl font-bold",children:"Tailors"}),s[4]=g):g=s[4];let v;s[5]!==c?(v=()=>c(!0),s[5]=c,s[6]=v):v=s[6];let _;s[7]===Symbol.for("react.memo_cache_sentinel")?(_=e.jsx(be,{className:"h-4 w-4 mr-2"}),s[7]=_):_=s[7];let l;s[8]!==v?(l=e.jsxs("div",{className:"flex items-center justify-between",children:[g,e.jsxs(S,{onClick:v,children:[_,"Add Tailor"]})]}),s[8]=v,s[9]=l):l=s[9];let N;s[10]===Symbol.for("react.memo_cache_sentinel")?(N=e.jsx(W,{children:"Tailor List"}),s[10]=N):N=s[10];let R;s[11]===Symbol.for("react.memo_cache_sentinel")?(R=e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s[11]=R):R=s[11];let $;s[12]===Symbol.for("react.memo_cache_sentinel")?($=q=>{n(q.target.value);const A=new URLSearchParams(window.location.search);q.target.value?A.set("search",q.target.value):A.delete("search"),ce.get("/tailors",Object.fromEntries(A),{preserveState:!0,replace:!0})},s[12]=$):$=s[12];let w;s[13]!==i?(w=e.jsxs("div",{className:"relative",children:[R,e.jsx(b,{placeholder:"Search tailors...",value:i,onChange:$,className:"pl-10 w-64"})]}),s[13]=i,s[14]=w):w=s[14];let H;s[15]===Symbol.for("react.memo_cache_sentinel")?(H=e.jsx(Q,{className:"w-40",children:e.jsx(Y,{placeholder:"All Status"})}),s[15]=H):H=s[15];let I;s[16]===Symbol.for("react.memo_cache_sentinel")?(I=e.jsxs(Z,{children:[e.jsx(p,{value:"all",children:"All Status"}),e.jsx(p,{value:"active",children:"Active"}),e.jsx(p,{value:"inactive",children:"Inactive"}),e.jsx(p,{value:"on_leave",children:"On Leave"})]}),s[16]=I):I=s[16];let T;s[17]!==a?(T=e.jsxs(G,{value:a,onValueChange:x,children:[H,I]}),s[17]=a,s[18]=T):T=s[18];let C;s[19]!==w||s[20]!==T?(C=e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[N,e.jsxs("div",{className:"flex gap-2",children:[w,T]})]})}),s[19]=w,s[20]=T,s[21]=C):C=s[21];let k;s[22]!==i||s[23]!==a?(k=e.jsx(K,{children:e.jsx(Ae,{search:i,statusFilter:a})}),s[22]=i,s[23]=a,s[24]=k):k=s[24];let D;s[25]!==C||s[26]!==k?(D=e.jsxs(X,{children:[C,k]}),s[25]=C,s[26]=k,s[27]=D):D=s[27];let F;s[28]!==c?(F=()=>c(!1),s[28]=c,s[29]=F):F=s[29];let L;s[30]!==t||s[31]!==F?(L=e.jsx(Pe,{open:t,onClose:F}),s[30]=t,s[31]=F,s[32]=L):L=s[32];let O;return s[33]!==D||s[34]!==L||s[35]!==l?(O=e.jsxs(oe,{children:[h,e.jsxs("div",{className:"space-y-6 p-4",children:[l,D,L]})]}),s[33]=D,s[34]=L,s[35]=l,s[36]=O):O=s[36],O}export{as as default};
