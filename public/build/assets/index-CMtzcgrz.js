import{d as O,r as c,j as e,t as d,c as W,H as K}from"./app-CuMYGVkL.js";import{X as R,B as T,A as G}from"./app-layout-BRI9TXqx.js";import{a as J,T as A,b as L,c as Q}from"./tabs-CWqBzSpV.js";import{B as p}from"./app-logo-icon-ChWx987R.js";import{I as C}from"./input-DUSeuPxY.js";import{L as f}from"./label-DIWDA_IM.js";import{T as Y}from"./textarea-DsA_uSMC.js";import{c as N,a as _,C as S,b}from"./card-BDhQKKtt.js";import{C as $}from"./check-DiwIk02C.js";import{P as z}from"./plus-CTqo1sn6.js";import{S as B}from"./square-pen-YsOr5ekF.js";import{T as H}from"./trash-2-pW9MuKgQ.js";import{S as D,a as M,b as k,c as I,d as E}from"./select-L2oKoFgp.js";import{d as Z}from"./index-C4J_hXM0.js";/* empty css            */import"./index-Bs1rG-Bl.js";import"./index-B-cXXmOe.js";import"./index-CHaiS2Tr.js";const j=O.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});j.interceptors.request.use(t=>{const a=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return a&&(t.headers["X-CSRF-TOKEN"]=a),t});const P=()=>j.get("/measurement-categories"),ee=t=>j.post("/measurement-categories",t),se=(t,a)=>j.put(`/measurement-categories/${t}`,a),te=t=>j.delete(`/measurement-categories/${t}`),re=t=>j.get("/measurement-fields",{params:t}),ae=t=>j.post("/measurement-fields",t),ie=(t,a)=>j.put(`/measurement-fields/${t}`,a),le=t=>j.delete(`/measurement-fields/${t}`);function ne(){const[t,a]=c.useState([]),[u,h]=c.useState(!0),[n,o]=c.useState(null),[i,m]=c.useState({name:"",description:"",is_active:!0,sort_order:0}),x=async()=>{try{h(!0);const r=await P();a(r.data)}catch(r){console.error("Failed to fetch categories:",r)}finally{h(!1)}};c.useEffect(()=>{x()},[]);const F=async r=>{r.preventDefault();try{n?(await se(n,i),d.success("Category updated successfully")):(await ee(i),d.success("Category created successfully")),m({name:"",description:"",is_active:!0,sort_order:0}),o(null),x()}catch(y){console.error("Error saving category:",y);const q=y.response?.data?.message||"Failed to save category";d.error(q)}},l=r=>{o(r.id),m({name:r.name,description:r.description||"",is_active:r.is_active,sort_order:r.sort_order||0})},g=async r=>{if(confirm("Are you sure you want to delete this category?"))try{await te(r),d.success("Category deleted successfully"),x()}catch{d.error("Failed to delete category")}},w=()=>{o(null),m({name:"",description:"",is_active:!0,sort_order:0})};return u?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(N,{className:"lg:col-span-1",children:[e.jsx(_,{children:e.jsx(S,{children:n?"Edit Category":"Add Category"})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"name",children:"Name *"}),e.jsx(C,{id:"name",value:i.name,onChange:r=>m({...i,name:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"description",children:"Description"}),e.jsx(Y,{id:"description",value:i.description,onChange:r=>m({...i,description:r.target.value})})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(C,{id:"sort_order",type:"number",value:i.sort_order,onChange:r=>m({...i,sort_order:parseInt(r.target.value)})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{type:"submit",className:"flex-1",children:[n?e.jsx($,{className:"h-4 w-4 mr-2"}):e.jsx(z,{className:"h-4 w-4 mr-2"}),n?"Update":"Add"]}),n&&e.jsx(p,{type:"button",variant:"outline",onClick:w,children:e.jsx(R,{className:"h-4 w-4"})})]})]})})]}),e.jsxs(N,{className:"lg:col-span-2",children:[e.jsx(_,{children:e.jsxs(S,{children:["Categories (",t.length,")"]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-3",children:t.map(r=>e.jsxs("div",{className:"border rounded-lg p-4 flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:r.name}),e.jsxs(T,{variant:"secondary",children:[r.fields?.length||0," fields"]})]}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Slug: ",r.slug]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{size:"sm",variant:"outline",onClick:()=>l(r),children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>g(r.id),children:e.jsx(H,{className:"h-4 w-4"})})]})]},r.id))})})]})]})}function ce(){const[t,a]=c.useState([]),[u,h]=c.useState([]),[n,o]=c.useState(!0),[i,m]=c.useState(null),[x,F]=c.useState("all"),[l,g]=c.useState({category_id:"",name:"",unit:"",is_required:!1,sort_order:0}),w=async()=>{try{const s=await P();a(s.data)}catch(s){console.error("Failed to fetch categories:",s)}},r=async()=>{try{o(!0);const v=await re(x&&x!=="all"?{category_id:x}:{});h(v.data)}catch(s){console.error("Failed to fetch fields:",s)}finally{o(!1)}};c.useEffect(()=>{w()},[]),c.useEffect(()=>{r()},[x]);const y=async s=>{if(s.preventDefault(),!l.category_id){d.error("Please select a category");return}try{i?(await ie(i,l),d.success("Field updated successfully")):(await ae(l),d.success("Field created successfully")),g({category_id:"",name:"",unit:"",is_required:!1,sort_order:0}),m(null),r()}catch(v){console.error("Error saving field:",v);const X=v.response?.data?.message||"Failed to save field";d.error(X)}},q=s=>{m(s.id),g({category_id:s.category_id.toString(),name:s.name,unit:s.unit,is_required:s.is_required,sort_order:s.sort_order||0})},U=async s=>{if(confirm("Are you sure you want to delete this field?"))try{await le(s),d.success("Field deleted successfully"),r()}catch{d.error("Failed to delete field")}},V=()=>{m(null),g({category_id:"",name:"",unit:"",is_required:!1,sort_order:0})};return n?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(N,{className:"lg:col-span-1",children:[e.jsx(_,{children:e.jsx(S,{children:i?"Edit Field":"Add Field"})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"category_id",children:"Category *"}),e.jsxs(D,{value:l.category_id,onValueChange:s=>g({...l,category_id:s}),required:!0,children:[e.jsx(M,{className:l.category_id?"":"border-red-500",children:e.jsx(k,{placeholder:"Select category"})}),e.jsx(I,{children:t.map(s=>e.jsx(E,{value:s.id.toString(),children:s.name},s.id))})]}),!l.category_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Category is required"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"name",children:"Field Name *"}),e.jsx(C,{id:"name",value:l.name,onChange:s=>g({...l,name:s.target.value}),placeholder:"e.g., Chest, Waist, Length",required:!0})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"unit",children:"Unit *"}),e.jsx(C,{id:"unit",value:l.unit,onChange:s=>g({...l,unit:s.target.value}),placeholder:"e.g., inches, cm",required:!0})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(C,{id:"sort_order",type:"number",value:l.sort_order,onChange:s=>g({...l,sort_order:parseInt(s.target.value)})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{type:"submit",className:"flex-1",children:[i?e.jsx($,{className:"h-4 w-4 mr-2"}):e.jsx(z,{className:"h-4 w-4 mr-2"}),i?"Update":"Add"]}),i&&e.jsx(p,{type:"button",variant:"outline",onClick:V,children:e.jsx(R,{className:"h-4 w-4"})})]})]})})]}),e.jsxs(N,{className:"lg:col-span-2",children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(S,{children:["Fields (",u.length,")"]}),e.jsxs(D,{value:x,onValueChange:F,children:[e.jsx(M,{className:"w-48",children:e.jsx(k,{placeholder:"All Categories"})}),e.jsxs(I,{children:[e.jsx(E,{value:"all",children:"All Categories"}),t.map(s=>e.jsx(E,{value:s.id.toString(),children:s.name},s.id))]})]})]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-3",children:u.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx(T,{variant:"outline",children:s.unit}),e.jsx(T,{variant:"secondary",children:s.category.name})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Slug: ",s.slug]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{size:"sm",variant:"outline",onClick:()=>q(s),children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>U(s.id),children:e.jsx(H,{className:"h-4 w-4"})})]})]},s.id))})})]})]})}const oe=[{title:"Dashboard",href:Z()},{title:"Measurements",href:"/measurements"},{title:"Settings",href:"/measurement-settings"}];function qe(){const t=W.c(5);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=e.jsx(K,{title:"Measurement Settings"}),t[0]=a):a=t[0];let u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u=e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Measurement Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage measurement categories and fields"})]}),t[1]=u):u=t[1];let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsxs(J,{children:[e.jsx(A,{value:"categories",children:"Categories"}),e.jsx(A,{value:"fields",children:"Fields"})]}),t[2]=h):h=t[2];let n;t[3]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx(L,{value:"categories",children:e.jsx(ne,{})}),t[3]=n):n=t[3];let o;return t[4]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsxs(G,{breadcrumbs:oe,children:[a,e.jsxs("div",{className:"space-y-6 p-4",children:[u,e.jsxs(Q,{defaultValue:"categories",className:"w-full",children:[h,n,e.jsx(L,{value:"fields",children:e.jsx(ce,{})})]})]})]}),t[4]=o):o=t[4],o}export{qe as default};
