import{d as le,e as V,j as e,r as i,t as I,c as re,H as ie,a as ce}from"./app-eDs_-Mho.js";import{B as M,S as ne,A as oe}from"./app-layout-CN1B5ki9.js";import{B as E}from"./app-logo-icon-DgyrohKX.js";import{I as L}from"./input-Da_4aK0I.js";import{c as J,a as W,C as K,b as G}from"./card-Di9wNz-y.js";import{c as B,b as U,D as se,a as X,d as de,f as me,e as he}from"./dialog-Qq9ubA5y.js";import{u as xe,a as ue,o as je,s as P,l as H,b as pe,_ as ae}from"./schemas-D1f-1t9D.js";import{L as b}from"./label-BD5n0dY2.js";import{T as fe}from"./textarea-CSCru5x8.js";import{S as Q,a as Y,b as Z,c as ee,d as S}from"./select-B8NPCyUk.js";import{C as ge}from"./checkbox-CeyjE1x1.js";import{S as N}from"./skeleton-CmJ5ef5F.js";import{P as ve}from"./pagination-2j6EJuSp.js";import{E as Ne}from"./eye-BLb3HKaS.js";import{S as ye}from"./square-pen-B_4rDJcX.js";import{T as be}from"./trash-2-HPGYmrKE.js";import{P as Se}from"./plus-tP6IBEFT.js";/* empty css            */import"./index-Drp0UAxW.js";import"./index-DZaLwZun.js";import"./index-C4J_hXM0.js";import"./index-C3lxKgUK.js";import"./check-QypyNZ-N.js";import"./chevron-left-D4U_WPVf.js";const q=le.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});q.interceptors.request.use(s=>{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return r&&(s.headers["X-CSRF-TOKEN"]=r),s});const we=s=>q.get("/tailors",{params:s}),_e=s=>q.post("/tailors",s),Te=(s,r)=>q.put(`/tailors/${s}`,r),Ce=s=>q.delete(`/tailors/${s}`),ke=s=>q.get(`/tailors/${s}`),Fe=je({name:P().min(1,"Name is required").max(191),phone:P().min(1,"Phone is required").max(20),email:P().email("Invalid email").max(191).optional().or(H("")),skill_level:ae(["beginner","intermediate","expert"]),address:P().optional().or(H("")),status:ae(["active","inactive","on_leave"]),hourly_rate:P().optional().or(H("")),specialization:P().optional().or(H("")),join_date:P().optional().or(H("")),create_user_account:pe().optional(),password:P().min(8).optional().or(H(""))});function te({onSubmit:s,loading:r,initialData:h}){const{appSettings:d}=V().props,c=d?.currency_symbol||"$",{register:a,handleSubmit:x,setValue:n,watch:u,formState:{errors:t}}=xe({resolver:ue(Fe),defaultValues:{skill_level:"intermediate",status:"active",create_user_account:!1,...h}}),f=u("skill_level"),g=u("status"),o=u("create_user_account");return e.jsxs("form",{onSubmit:x(s),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",children:"Name *"}),e.jsx(L,{id:"name",...a("name"),className:t.name?"border-red-500":""}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name.message})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"phone",children:"Phone *"}),e.jsx(L,{id:"phone",...a("phone"),className:t.phone?"border-red-500":""}),t.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.phone.message})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email",children:"Email"}),e.jsx(L,{id:"email",type:"email",...a("email"),className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"skill_level",children:"Skill Level *"}),e.jsxs(Q,{value:f,onValueChange:m=>n("skill_level",m),children:[e.jsx(Y,{className:t.skill_level?"border-red-500":"",children:e.jsx(Z,{placeholder:"Select skill level"})}),e.jsxs(ee,{children:[e.jsx(S,{value:"beginner",children:"Beginner"}),e.jsx(S,{value:"intermediate",children:"Intermediate"}),e.jsx(S,{value:"expert",children:"Expert"})]})]}),t.skill_level&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.skill_level.message})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"status",children:"Status *"}),e.jsxs(Q,{value:g,onValueChange:m=>n("status",m),children:[e.jsx(Y,{className:t.status?"border-red-500":"",children:e.jsx(Z,{placeholder:"Select status"})}),e.jsxs(ee,{children:[e.jsx(S,{value:"active",children:"Active"}),e.jsx(S,{value:"inactive",children:"Inactive"}),e.jsx(S,{value:"on_leave",children:"On Leave"})]})]}),t.status&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.status.message})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(b,{htmlFor:"hourly_rate",children:["Hourly Rate (",c,")"]}),e.jsx(L,{id:"hourly_rate",type:"number",step:"0.01",...a("hourly_rate"),className:t.hourly_rate?"border-red-500":""}),t.hourly_rate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.hourly_rate.message})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"join_date",children:"Join Date"}),e.jsx(L,{id:"join_date",type:"date",...a("join_date"),className:t.join_date?"border-red-500":""}),t.join_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.join_date.message})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"specialization",children:"Specialization"}),e.jsx(L,{id:"specialization",placeholder:"e.g., Wedding dresses, Suits, Alterations",...a("specialization"),className:t.specialization?"border-red-500":""}),t.specialization&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.specialization.message})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"address",children:"Address"}),e.jsx(fe,{id:"address",...a("address"),className:t.address?"border-red-500":""}),t.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.address.message})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 border-t pt-4",children:[e.jsx(ge,{id:"create_user_account",checked:o,onCheckedChange:m=>n("create_user_account",m)}),e.jsx("label",{htmlFor:"create_user_account",className:"text-sm cursor-pointer",children:"Create user account for tailor dashboard access"})]}),o&&e.jsxs("div",{children:[e.jsx(b,{htmlFor:"password",children:"Password *"}),e.jsx(L,{id:"password",type:"password",...a("password"),className:t.password?"border-red-500":""}),t.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.password.message})]})]}),e.jsx(E,{type:"submit",disabled:r,className:"w-full",children:r?"Saving...":"Save Tailor"})]})}function De({tailor:s,open:r,onClose:h,onSuccess:d}){const[c,a]=i.useState(!1),x=async n=>{try{a(!0),await Te(s.id,n),I.success(`${s.name} updated successfully`),d()}catch(u){console.error("Failed to update tailor:",u),I.error("Failed to update tailor. Please try again.")}finally{a(!1)}};return e.jsx(B,{open:r,onOpenChange:h,children:e.jsxs(U,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"tailor-edit-description",children:[e.jsx(se,{children:e.jsx(X,{children:"Edit Tailor"})}),e.jsx("div",{id:"tailor-edit-description",className:"sr-only",children:"Form to edit tailor information"}),e.jsx(te,{onSubmit:x,loading:c,initialData:s})]})})}function Pe({tailor:s,open:r,onClose:h}){const{appSettings:d}=V().props,c=d?.currency_symbol||"$",[a,x]=i.useState(null),[n,u]=i.useState(!0);i.useEffect(()=>{r&&s&&t()},[r,s]);const t=async()=>{try{const o=await ke(s.id);x(o.data)}catch(o){console.error("Failed to fetch tailor detail:",o)}finally{u(!1)}},f=o=>{switch(o){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},g=o=>{switch(o){case"expert":return"bg-purple-100 text-purple-800";case"intermediate":return"bg-blue-100 text-blue-800";case"beginner":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx(B,{open:r,onOpenChange:h,children:e.jsxs(U,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","aria-describedby":"tailor-detail-description",children:[e.jsx(se,{children:e.jsx(X,{children:"Tailor Details"})}),e.jsx("div",{id:"tailor-detail-description",className:"sr-only",children:"Detailed view of tailor information"}),n?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(J,{children:[e.jsx(W,{children:e.jsx(K,{children:"Personal Information"})}),e.jsxs(G,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",a?.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",a?.phone]}),a?.email&&e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",a.email]}),a?.address&&e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",a.address]}),a?.join_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Join Date:"})," ",new Date(a.join_date).toLocaleDateString()]})]})]}),e.jsxs(J,{children:[e.jsx(W,{children:e.jsx(K,{children:"Professional Details"})}),e.jsxs(G,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Skill Level:"}),e.jsx(M,{className:g(a?.skill_level||""),children:a?.skill_level})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Status:"}),e.jsx(M,{className:f(a?.status||""),children:a?.status.replace("_"," ")})]}),a?.hourly_rate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Hourly Rate:"})," ",c,a.hourly_rate,"/hr"]}),a?.specialization&&e.jsxs("div",{children:[e.jsx("strong",{children:"Specialization:"})," ",a.specialization]})]})]})]})]})})}function Le({tailor:s,open:r,onClose:h,onSuccess:d}){const[c,a]=i.useState(!1),x=async()=>{if(s)try{a(!0),await Ce(s.id),I.success(`${s.name} has been successfully deleted`),d(),h()}catch(n){console.error("Failed to delete tailor:",n),I.error("Failed to delete tailor. Please try again.")}finally{a(!1)}};return e.jsx(B,{open:r,onOpenChange:h,children:e.jsxs(U,{"aria-describedby":"delete-tailor-description",children:[e.jsx(X,{children:"Are you sure you want to delete this tailor?"}),e.jsxs(de,{id:"delete-tailor-description",children:["Once deleted, all of ",s?.name,"'s data will be permanently removed. This action cannot be undone."]}),e.jsxs(me,{className:"gap-2",children:[e.jsx(he,{asChild:!0,children:e.jsx(E,{variant:"secondary",children:"Cancel"})}),e.jsx(E,{variant:"destructive",disabled:c,onClick:x,children:c?"Deleting...":"Delete Tailor"})]})]})})}function Ae({search:s,statusFilter:r}){const{appSettings:h}=V().props,d=h?.currency_symbol||"$",[c,a]=i.useState([]),[x,n]=i.useState(!0),[u,t]=i.useState(null),[f,g]=i.useState(null),[o,m]=i.useState(null),[w,y]=i.useState(1),[z,R]=i.useState(1),[O,_]=i.useState(0),[A,$]=i.useState(0),[T,C]=i.useState(0),v=async(l=1)=>{try{n(!0);const j={search:s,page:l};r&&r!=="all"&&(j.status=r);const p=await we(j);a(p.data.data),y(p.data.current_page),R(p.data.last_page),_(p.data.total),$(p.data.from||0),C(p.data.to||0)}catch(j){console.error("Failed to fetch tailors:",j)}finally{n(!1)}};i.useEffect(()=>{const l=setTimeout(()=>{y(1),v(1)},300);return()=>clearTimeout(l)},[s,r]);const k=l=>{y(l),v(l)},F=l=>{switch(l){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},D=l=>{switch(l){case"expert":return"bg-purple-100 text-purple-800";case"intermediate":return"bg-blue-100 text-blue-800";case"beginner":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return x?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"#"}),e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Skill Level"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Hourly Rate"}),e.jsx("th",{className:"text-left p-4",children:"Orders"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:[...Array(5)].map((l,j)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:e.jsx(N,{className:"h-4 w-8"})}),e.jsx("td",{className:"p-4",children:e.jsx(N,{className:"h-5 w-32"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"h-4 w-28"}),e.jsx(N,{className:"h-4 w-36"})]})}),e.jsx("td",{className:"p-4",children:e.jsx(N,{className:"h-6 w-24"})}),e.jsx("td",{className:"p-4",children:e.jsx(N,{className:"h-6 w-20"})}),e.jsx("td",{className:"p-4",children:e.jsx(N,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-4",children:e.jsx(N,{className:"h-6 w-12"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{className:"h-9 w-9"}),e.jsx(N,{className:"h-9 w-9"}),e.jsx(N,{className:"h-9 w-9"})]})})]},j))})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"#"}),e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Skill Level"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Hourly Rate"}),e.jsx("th",{className:"text-left p-4",children:"Orders"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:c.map((l,j)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[e.jsx("td",{className:"p-4 text-sm text-gray-600",children:A+j}),e.jsx("td",{className:"p-4 font-medium",children:l.name}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm",children:l.phone}),l.email&&e.jsx("div",{className:"text-sm text-gray-600",children:l.email})]})}),e.jsx("td",{className:"p-4",children:e.jsx(M,{className:D(l.skill_level),children:l.skill_level})}),e.jsx("td",{className:"p-4",children:e.jsx(M,{className:F(l.status),children:l.status.replace("_"," ")})}),e.jsx("td",{className:"p-4 text-sm",children:l.hourly_rate?`${d}${l.hourly_rate}/hr`:"-"}),e.jsx("td",{className:"p-4 text-sm",children:e.jsx(M,{variant:"secondary",children:l.orders_count||0})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(E,{size:"sm",variant:"outline",onClick:()=>g(l),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>t(l),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>m(l),children:e.jsx(be,{className:"h-4 w-4"})})]})})]},l.id))})]})}),e.jsx(ve,{currentPage:w,totalPages:z,onPageChange:k,showingFrom:A,showingTo:T,total:O}),u&&e.jsx(De,{tailor:u,open:!!u,onClose:()=>t(null),onSuccess:()=>{t(null),v(w)}}),f&&e.jsx(Pe,{tailor:f,open:!!f,onClose:()=>g(null)}),e.jsx(Le,{tailor:o,open:!!o,onClose:()=>m(null),onSuccess:()=>{m(null),v(w)}})]})}function Ee({open:s,onClose:r}){const[h,d]=i.useState(!1),c=async a=>{try{d(!0),await _e(a),I.success("Tailor created successfully"),r(),window.location.reload()}catch(x){console.error("Failed to create tailor:",x),I.error("Failed to create tailor. Please try again.")}finally{d(!1)}};return e.jsx(B,{open:s,onOpenChange:r,children:e.jsxs(U,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"tailor-create-description",children:[e.jsx(se,{children:e.jsx(X,{children:"Add New Tailor"})}),e.jsx("div",{id:"tailor-create-description",className:"sr-only",children:"Form to create a new tailor"}),e.jsx(te,{onSubmit:c,loading:h})]})})}const ze=[{title:"Tailors",href:"/tailors"}];function is(){const s=re.c(37),{url:r}=V(),h=new URLSearchParams(window.location.search),[d,c]=i.useState(!1),[a,x]=i.useState(h.get("search")||""),[n,u]=i.useState("");let t;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{const p=new URLSearchParams(window.location.search).get("search");p&&x(p)},s[0]=t):t=s[0];let f;s[1]!==r?(f=[r],s[1]=r,s[2]=f):f=s[2],i.useEffect(t,f);let g;s[3]===Symbol.for("react.memo_cache_sentinel")?(g=e.jsx(ie,{title:"Tailors"}),s[3]=g):g=s[3];let o;s[4]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Tailors"}),s[4]=o):o=s[4];let m;s[5]!==c?(m=()=>c(!0),s[5]=c,s[6]=m):m=s[6];let w;s[7]===Symbol.for("react.memo_cache_sentinel")?(w=e.jsx(Se,{className:"h-4 w-4 mr-2"}),s[7]=w):w=s[7];let y;s[8]!==m?(y=e.jsxs("div",{className:"flex items-center justify-between",children:[o,e.jsxs(E,{onClick:m,children:[w,"Add Tailor"]})]}),s[8]=m,s[9]=y):y=s[9];let z;s[10]===Symbol.for("react.memo_cache_sentinel")?(z=e.jsx(K,{children:"Tailor List"}),s[10]=z):z=s[10];let R;s[11]===Symbol.for("react.memo_cache_sentinel")?(R=e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s[11]=R):R=s[11];let O;s[12]===Symbol.for("react.memo_cache_sentinel")?(O=j=>{x(j.target.value);const p=new URLSearchParams(window.location.search);j.target.value?p.set("search",j.target.value):p.delete("search"),ce.get("/tailors",Object.fromEntries(p),{preserveState:!0,replace:!0})},s[12]=O):O=s[12];let _;s[13]!==a?(_=e.jsxs("div",{className:"relative w-full sm:w-64",children:[R,e.jsx(L,{placeholder:"Search tailors...",value:a,onChange:O,className:"pl-10 w-full"})]}),s[13]=a,s[14]=_):_=s[14];let A;s[15]===Symbol.for("react.memo_cache_sentinel")?(A=e.jsx(Y,{className:"w-full sm:w-40",children:e.jsx(Z,{placeholder:"All Status"})}),s[15]=A):A=s[15];let $;s[16]===Symbol.for("react.memo_cache_sentinel")?($=e.jsxs(ee,{children:[e.jsx(S,{value:"all",children:"All Status"}),e.jsx(S,{value:"active",children:"Active"}),e.jsx(S,{value:"inactive",children:"Inactive"}),e.jsx(S,{value:"on_leave",children:"On Leave"})]}),s[16]=$):$=s[16];let T;s[17]!==n?(T=e.jsxs(Q,{value:n,onValueChange:u,children:[A,$]}),s[17]=n,s[18]=T):T=s[18];let C;s[19]!==_||s[20]!==T?(C=e.jsx(W,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[z,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[_,T]})]})}),s[19]=_,s[20]=T,s[21]=C):C=s[21];let v;s[22]!==a||s[23]!==n?(v=e.jsx(G,{children:e.jsx(Ae,{search:a,statusFilter:n})}),s[22]=a,s[23]=n,s[24]=v):v=s[24];let k;s[25]!==C||s[26]!==v?(k=e.jsxs(J,{children:[C,v]}),s[25]=C,s[26]=v,s[27]=k):k=s[27];let F;s[28]!==c?(F=()=>c(!1),s[28]=c,s[29]=F):F=s[29];let D;s[30]!==d||s[31]!==F?(D=e.jsx(Ee,{open:d,onClose:F}),s[30]=d,s[31]=F,s[32]=D):D=s[32];let l;return s[33]!==k||s[34]!==D||s[35]!==y?(l=e.jsxs(oe,{breadcrumbs:ze,children:[g,e.jsxs("div",{className:"space-y-6 p-4",children:[y,k,D]})]}),s[33]=k,s[34]=D,s[35]=y,s[36]=l):l=s[36],l}export{is as default};
