import{d as le,j as e,r as d,t as R,e as ae,c as re,H as ie,a as ce}from"./app-pwOgIdW3.js";import{B as $,S as ne,A as oe}from"./app-layout-Bg3L5Oye.js";import{B as _}from"./app-logo-icon-Dxs_odns.js";import{I as w}from"./input-BM91w7k_.js";import{c as X,a as J,C as W,b as K}from"./card-DXsoVNLq.js";import{c as V,b as B,D as ee,a as U,d as de,f as me,e as he}from"./dialog-VcvuUWLa.js";import{u as xe,a as ue,o as je,s as b,l as z,b as pe,_ as se}from"./schemas-CKZDDLF5.js";import{L as p}from"./label-lvKn-o3H.js";import{T as fe}from"./textarea-tgjW2Xgz.js";import{S as G,a as Q,b as Y,c as Z,d as g}from"./select-B6amYkYd.js";import{C as ge}from"./checkbox-O9AdTK-Z.js";import{S as f}from"./skeleton-CcAC4NBi.js";import{E as ve}from"./eye-Onelvia5.js";import{S as Ne}from"./square-pen-BNsuk6Qs.js";import{T as ye}from"./trash-2-B0hx2O67.js";import{P as be}from"./plus-8VsgtOVu.js";/* empty css            */import"./index-C7iv0R3u.js";import"./index-Zg_VQMPS.js";import"./index-C4J_hXM0.js";import"./index-Rr57VS5F.js";import"./check-BvMeasfX.js";const O=le.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});O.interceptors.request.use(s=>{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return r&&(s.headers["X-CSRF-TOKEN"]=r),s});const we=s=>O.get("/tailors",{params:s}),Se=s=>O.post("/tailors",s),_e=(s,r)=>O.put(`/tailors/${s}`,r),Te=s=>O.delete(`/tailors/${s}`),Ce=s=>O.get(`/tailors/${s}`),ke=je({name:b().min(1,"Name is required").max(191),phone:b().min(1,"Phone is required").max(20),email:b().email("Invalid email").max(191).optional().or(z("")),skill_level:se(["beginner","intermediate","expert"]),address:b().optional().or(z("")),status:se(["active","inactive","on_leave"]),hourly_rate:b().optional().or(z("")),specialization:b().optional().or(z("")),join_date:b().optional().or(z("")),create_user_account:pe().optional(),password:b().min(8).optional().or(z(""))});function te({onSubmit:s,loading:r,initialData:m}){const{register:t,handleSubmit:c,setValue:i,watch:o,formState:{errors:a}}=xe({resolver:ue(ke),defaultValues:{skill_level:"intermediate",status:"active",create_user_account:!1,...m}}),u=o("skill_level"),x=o("status"),n=o("create_user_account");return e.jsxs("form",{onSubmit:c(s),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",children:"Name *"}),e.jsx(w,{id:"name",...t("name"),className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"phone",children:"Phone *"}),e.jsx(w,{id:"phone",...t("phone"),className:a.phone?"border-red-500":""}),a.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone.message})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"email",children:"Email"}),e.jsx(w,{id:"email",type:"email",...t("email"),className:a.email?"border-red-500":""}),a.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"skill_level",children:"Skill Level *"}),e.jsxs(G,{value:u,onValueChange:h=>i("skill_level",h),children:[e.jsx(Q,{className:a.skill_level?"border-red-500":"",children:e.jsx(Y,{placeholder:"Select skill level"})}),e.jsxs(Z,{children:[e.jsx(g,{value:"beginner",children:"Beginner"}),e.jsx(g,{value:"intermediate",children:"Intermediate"}),e.jsx(g,{value:"expert",children:"Expert"})]})]}),a.skill_level&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.skill_level.message})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"status",children:"Status *"}),e.jsxs(G,{value:x,onValueChange:h=>i("status",h),children:[e.jsx(Q,{className:a.status?"border-red-500":"",children:e.jsx(Y,{placeholder:"Select status"})}),e.jsxs(Z,{children:[e.jsx(g,{value:"active",children:"Active"}),e.jsx(g,{value:"inactive",children:"Inactive"}),e.jsx(g,{value:"on_leave",children:"On Leave"})]})]}),a.status&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.status.message})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"hourly_rate",children:"Hourly Rate ($)"}),e.jsx(w,{id:"hourly_rate",type:"number",step:"0.01",...t("hourly_rate"),className:a.hourly_rate?"border-red-500":""}),a.hourly_rate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.hourly_rate.message})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"join_date",children:"Join Date"}),e.jsx(w,{id:"join_date",type:"date",...t("join_date"),className:a.join_date?"border-red-500":""}),a.join_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.join_date.message})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"specialization",children:"Specialization"}),e.jsx(w,{id:"specialization",placeholder:"e.g., Wedding dresses, Suits, Alterations",...t("specialization"),className:a.specialization?"border-red-500":""}),a.specialization&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.specialization.message})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"address",children:"Address"}),e.jsx(fe,{id:"address",...t("address"),className:a.address?"border-red-500":""}),a.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.address.message})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 border-t pt-4",children:[e.jsx(ge,{id:"create_user_account",checked:n,onCheckedChange:h=>i("create_user_account",h)}),e.jsx("label",{htmlFor:"create_user_account",className:"text-sm cursor-pointer",children:"Create user account for tailor dashboard access"})]}),n&&e.jsxs("div",{children:[e.jsx(p,{htmlFor:"password",children:"Password *"}),e.jsx(w,{id:"password",type:"password",...t("password"),className:a.password?"border-red-500":""}),a.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.password.message})]})]}),e.jsx(_,{type:"submit",disabled:r,className:"w-full",children:r?"Saving...":"Save Tailor"})]})}function De({tailor:s,open:r,onClose:m,onSuccess:t}){const[c,i]=d.useState(!1),o=async a=>{try{i(!0),await _e(s.id,a),R.success(`${s.name} updated successfully`),t()}catch(u){console.error("Failed to update tailor:",u),R.error("Failed to update tailor. Please try again.")}finally{i(!1)}};return e.jsx(V,{open:r,onOpenChange:m,children:e.jsxs(B,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"tailor-edit-description",children:[e.jsx(ee,{children:e.jsx(U,{children:"Edit Tailor"})}),e.jsx("div",{id:"tailor-edit-description",className:"sr-only",children:"Form to edit tailor information"}),e.jsx(te,{onSubmit:o,loading:c,initialData:s})]})})}function Fe({tailor:s,open:r,onClose:m}){const[t,c]=d.useState(null),[i,o]=d.useState(!0);d.useEffect(()=>{r&&s&&a()},[r,s]);const a=async()=>{try{const n=await Ce(s.id);c(n.data)}catch(n){console.error("Failed to fetch tailor detail:",n)}finally{o(!1)}},u=n=>{switch(n){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},x=n=>{switch(n){case"expert":return"bg-purple-100 text-purple-800";case"intermediate":return"bg-blue-100 text-blue-800";case"beginner":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx(V,{open:r,onOpenChange:m,children:e.jsxs(B,{className:"max-w-2xl max-h-[80vh] overflow-y-auto","aria-describedby":"tailor-detail-description",children:[e.jsx(ee,{children:e.jsx(U,{children:"Tailor Details"})}),e.jsx("div",{id:"tailor-detail-description",className:"sr-only",children:"Detailed view of tailor information"}),i?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(X,{children:[e.jsx(J,{children:e.jsx(W,{children:"Personal Information"})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",t?.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",t?.phone]}),t?.email&&e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),t?.address&&e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",t.address]}),t?.join_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Join Date:"})," ",new Date(t.join_date).toLocaleDateString()]})]})]}),e.jsxs(X,{children:[e.jsx(J,{children:e.jsx(W,{children:"Professional Details"})}),e.jsxs(K,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Skill Level:"}),e.jsx($,{className:x(t?.skill_level||""),children:t?.skill_level})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"Status:"}),e.jsx($,{className:u(t?.status||""),children:t?.status.replace("_"," ")})]}),t?.hourly_rate&&e.jsxs("div",{children:[e.jsx("strong",{children:"Hourly Rate:"})," $",t.hourly_rate,"/hr"]}),t?.specialization&&e.jsxs("div",{children:[e.jsx("strong",{children:"Specialization:"})," ",t.specialization]})]})]})]})]})})}function Le({tailor:s,open:r,onClose:m,onSuccess:t}){const[c,i]=d.useState(!1),o=async()=>{if(s)try{i(!0),await Te(s.id),R.success(`${s.name} has been successfully deleted`),t(),m()}catch(a){console.error("Failed to delete tailor:",a),R.error("Failed to delete tailor. Please try again.")}finally{i(!1)}};return e.jsx(V,{open:r,onOpenChange:m,children:e.jsxs(B,{"aria-describedby":"delete-tailor-description",children:[e.jsx(U,{children:"Are you sure you want to delete this tailor?"}),e.jsxs(de,{id:"delete-tailor-description",children:["Once deleted, all of ",s?.name,"'s data will be permanently removed. This action cannot be undone."]}),e.jsxs(me,{className:"gap-2",children:[e.jsx(he,{asChild:!0,children:e.jsx(_,{variant:"secondary",children:"Cancel"})}),e.jsx(_,{variant:"destructive",disabled:c,onClick:o,children:c?"Deleting...":"Delete Tailor"})]})]})})}function Ae({search:s,statusFilter:r}){const{appSettings:m}=ae().props,t=m?.currency_symbol||"$",[c,i]=d.useState([]),[o,a]=d.useState(!0),[u,x]=d.useState(null),[n,h]=d.useState(null),[S,j]=d.useState(null),v=async()=>{try{a(!0);const l={search:s};r&&r!=="all"&&(l.status=r);const y=await we(l);i(y.data.data)}catch(l){console.error("Failed to fetch tailors:",l)}finally{a(!1)}};d.useEffect(()=>{const l=setTimeout(()=>{v()},300);return()=>clearTimeout(l)},[s,r]);const N=l=>{switch(l){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},T=l=>{switch(l){case"expert":return"bg-purple-100 text-purple-800";case"intermediate":return"bg-blue-100 text-blue-800";case"beginner":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return o?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Skill Level"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Hourly Rate"}),e.jsx("th",{className:"text-left p-4",children:"Orders"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:[...Array(5)].map((l,y)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-5 w-32"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{className:"h-4 w-28"}),e.jsx(f,{className:"h-4 w-36"})]})}),e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-6 w-24"})}),e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-6 w-20"})}),e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-4 w-16"})}),e.jsx("td",{className:"p-4",children:e.jsx(f,{className:"h-6 w-12"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{className:"h-9 w-9"}),e.jsx(f,{className:"h-9 w-9"}),e.jsx(f,{className:"h-9 w-9"})]})})]},y))})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Name"}),e.jsx("th",{className:"text-left p-4",children:"Contact"}),e.jsx("th",{className:"text-left p-4",children:"Skill Level"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Hourly Rate"}),e.jsx("th",{className:"text-left p-4",children:"Orders"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:c.map(l=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[e.jsx("td",{className:"p-4 font-medium",children:l.name}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm",children:l.phone}),l.email&&e.jsx("div",{className:"text-sm text-gray-600",children:l.email})]})}),e.jsx("td",{className:"p-4",children:e.jsx($,{className:T(l.skill_level),children:l.skill_level})}),e.jsx("td",{className:"p-4",children:e.jsx($,{className:N(l.status),children:l.status.replace("_"," ")})}),e.jsx("td",{className:"p-4 text-sm",children:l.hourly_rate?`${t}${l.hourly_rate}/hr`:"-"}),e.jsx("td",{className:"p-4 text-sm",children:e.jsx($,{variant:"secondary",children:l.orders_count||0})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(_,{size:"sm",variant:"outline",onClick:()=>h(l),children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>x(l),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>j(l),children:e.jsx(ye,{className:"h-4 w-4"})})]})})]},l.id))})]})}),u&&e.jsx(De,{tailor:u,open:!!u,onClose:()=>x(null),onSuccess:()=>{x(null),v()}}),n&&e.jsx(Fe,{tailor:n,open:!!n,onClose:()=>h(null)}),e.jsx(Le,{tailor:S,open:!!S,onClose:()=>j(null),onSuccess:()=>{j(null),v()}})]})}function Pe({open:s,onClose:r}){const[m,t]=d.useState(!1),c=async i=>{try{t(!0),await Se(i),R.success("Tailor created successfully"),r(),window.location.reload()}catch(o){console.error("Failed to create tailor:",o),R.error("Failed to create tailor. Please try again.")}finally{t(!1)}};return e.jsx(V,{open:s,onOpenChange:r,children:e.jsxs(B,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"tailor-create-description",children:[e.jsx(ee,{children:e.jsx(U,{children:"Add New Tailor"})}),e.jsx("div",{id:"tailor-create-description",className:"sr-only",children:"Form to create a new tailor"}),e.jsx(te,{onSubmit:c,loading:m})]})})}const Ee=[{title:"Tailors",href:"/tailors"}];function ts(){const s=re.c(37),{url:r}=ae(),m=new URLSearchParams(window.location.search),[t,c]=d.useState(!1),[i,o]=d.useState(m.get("search")||""),[a,u]=d.useState("");let x;s[0]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{const E=new URLSearchParams(window.location.search).get("search");E&&o(E)},s[0]=x):x=s[0];let n;s[1]!==r?(n=[r],s[1]=r,s[2]=n):n=s[2],d.useEffect(x,n);let h;s[3]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsx(ie,{title:"Tailors"}),s[3]=h):h=s[3];let S;s[4]===Symbol.for("react.memo_cache_sentinel")?(S=e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Tailors"}),s[4]=S):S=s[4];let j;s[5]!==c?(j=()=>c(!0),s[5]=c,s[6]=j):j=s[6];let v;s[7]===Symbol.for("react.memo_cache_sentinel")?(v=e.jsx(be,{className:"h-4 w-4 mr-2"}),s[7]=v):v=s[7];let N;s[8]!==j?(N=e.jsxs("div",{className:"flex items-center justify-between",children:[S,e.jsxs(_,{onClick:j,children:[v,"Add Tailor"]})]}),s[8]=j,s[9]=N):N=s[9];let T;s[10]===Symbol.for("react.memo_cache_sentinel")?(T=e.jsx(W,{children:"Tailor List"}),s[10]=T):T=s[10];let l;s[11]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s[11]=l):l=s[11];let y;s[12]===Symbol.for("react.memo_cache_sentinel")?(y=M=>{o(M.target.value);const E=new URLSearchParams(window.location.search);M.target.value?E.set("search",M.target.value):E.delete("search"),ce.get("/tailors",Object.fromEntries(E),{preserveState:!0,replace:!0})},s[12]=y):y=s[12];let C;s[13]!==i?(C=e.jsxs("div",{className:"relative w-full sm:w-64",children:[l,e.jsx(w,{placeholder:"Search tailors...",value:i,onChange:y,className:"pl-10 w-full"})]}),s[13]=i,s[14]=C):C=s[14];let H;s[15]===Symbol.for("react.memo_cache_sentinel")?(H=e.jsx(Q,{className:"w-full sm:w-40",children:e.jsx(Y,{placeholder:"All Status"})}),s[15]=H):H=s[15];let I;s[16]===Symbol.for("react.memo_cache_sentinel")?(I=e.jsxs(Z,{children:[e.jsx(g,{value:"all",children:"All Status"}),e.jsx(g,{value:"active",children:"Active"}),e.jsx(g,{value:"inactive",children:"Inactive"}),e.jsx(g,{value:"on_leave",children:"On Leave"})]}),s[16]=I):I=s[16];let k;s[17]!==a?(k=e.jsxs(G,{value:a,onValueChange:u,children:[H,I]}),s[17]=a,s[18]=k):k=s[18];let D;s[19]!==C||s[20]!==k?(D=e.jsx(J,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[T,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[C,k]})]})}),s[19]=C,s[20]=k,s[21]=D):D=s[21];let F;s[22]!==i||s[23]!==a?(F=e.jsx(K,{children:e.jsx(Ae,{search:i,statusFilter:a})}),s[22]=i,s[23]=a,s[24]=F):F=s[24];let L;s[25]!==D||s[26]!==F?(L=e.jsxs(X,{children:[D,F]}),s[25]=D,s[26]=F,s[27]=L):L=s[27];let A;s[28]!==c?(A=()=>c(!1),s[28]=c,s[29]=A):A=s[29];let P;s[30]!==t||s[31]!==A?(P=e.jsx(Pe,{open:t,onClose:A}),s[30]=t,s[31]=A,s[32]=P):P=s[32];let q;return s[33]!==L||s[34]!==P||s[35]!==N?(q=e.jsxs(oe,{breadcrumbs:Ee,children:[h,e.jsxs("div",{className:"space-y-6 p-4",children:[N,L,P]})]}),s[33]=L,s[34]=P,s[35]=N,s[36]=q):q=s[36],q}export{ts as default};
