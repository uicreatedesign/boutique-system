import{b as v,r as m,j as s,t as h,d as _,H as y}from"./app-B_UukfDj.js";import{B as x}from"./app-logo-icon-BQOBW5g9.js";import{I as o}from"./input-w7iav3y_.js";import{L as l}from"./label-kpte3InX.js";import{S as N,a as w,b,c as T,d as f}from"./select-DpjmdvVU.js";import{H as C}from"./heading-small-DYrgXSk2.js";import{I as i}from"./input-error-BjX_nQRz.js";import{A as F}from"./app-layout-BUm1LCSn.js";import{S as M}from"./layout-v82HUiZj.js";import{c as P,g as E,b as k,D as L,a as D}from"./dialog-CotSruar.js";import{M as H}from"./mail-DFJetxO5.js";/* empty css            */import"./index-Cb2xaMxf.js";import"./index-BQLMDo0O.js";import"./index-CqUELJDu.js";import"./check-5kBHEIWH.js";import"./index-C4J_hXM0.js";import"./index-DZZlyDoJ.js";const I=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],A=v("Send",I);function z(){const[a,n]=m.useState(!1),[d,c]=m.useState(""),[t,p]=m.useState(!1),j=async g=>{if(g.preventDefault(),!d){h.error("Please enter an email address");return}p(!0);try{await _.post("/api/settings/smtp/test",{email:d}),h.success("Test email sent successfully!"),n(!1),c("")}catch(r){h.error(r.response?.data?.message||"Failed to send test email")}finally{p(!1)}};return s.jsxs(P,{open:a,onOpenChange:n,children:[s.jsx(E,{asChild:!0,children:s.jsxs(x,{variant:"outline",size:"sm",children:[s.jsx(H,{className:"h-4 w-4 mr-2"}),"Test Email"]})}),s.jsxs(k,{className:"max-w-md",children:[s.jsx(L,{children:s.jsx(D,{children:"Send Test Email"})}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(l,{htmlFor:"test-email",children:"Email Address"}),s.jsx(o,{id:"test-email",type:"email",value:d,onChange:g=>c(g.target.value),placeholder:"Enter email to test",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(x,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(x,{type:"submit",disabled:t,children:t?"Sending...":s.jsxs(s.Fragment,{children:[s.jsx(A,{className:"h-4 w-4 mr-2"}),"Send Test"]})})]})]})]})]})}const B=[{title:"SMTP Settings",href:"/settings/smtp"}];function rs(){const[a,n]=m.useState({smtp_host:"",smtp_port:"587",smtp_username:"",smtp_password:"",smtp_encryption:"tls",mail_from_address:"",mail_from_name:""}),[d,c]=m.useState(!1),[t,p]=m.useState({});m.useEffect(()=>{j()},[]);const j=async()=>{try{const e=await _.get("/api/settings/smtp");n(e.data)}catch(e){console.error("Failed to fetch SMTP settings:",e)}},g=async e=>{e.preventDefault(),c(!0),p({});try{await _.put("/api/settings/smtp",a),h.success("SMTP settings updated successfully")}catch(u){u.response?.data?.errors&&p(u.response.data.errors),h.error("Failed to update SMTP settings"),console.error("Failed to update SMTP settings:",u)}finally{c(!1)}},r=(e,u)=>{n(S=>({...S,[e]:u}))};return s.jsxs(F,{breadcrumbs:B,children:[s.jsx(y,{title:"SMTP Settings"}),s.jsx(M,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(C,{title:"SMTP Settings",description:"Configure email server settings for sending emails"}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(l,{htmlFor:"smtp_host",children:"SMTP Host"}),s.jsx(o,{id:"smtp_host",value:a.smtp_host,onChange:e=>r("smtp_host",e.target.value),placeholder:"smtp.gmail.com",className:"mt-1 block w-full"}),s.jsx(i,{message:t.smtp_host?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(l,{htmlFor:"smtp_port",children:"SMTP Port"}),s.jsx(o,{id:"smtp_port",type:"number",value:a.smtp_port,onChange:e=>r("smtp_port",e.target.value),placeholder:"587",className:"mt-1 block w-full"}),s.jsx(i,{message:t.smtp_port?.[0]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(l,{htmlFor:"smtp_username",children:"SMTP Username"}),s.jsx(o,{id:"smtp_username",value:a.smtp_username,onChange:e=>r("smtp_username",e.target.value),placeholder:"your-email@gmail.com",className:"mt-1 block w-full"}),s.jsx(i,{message:t.smtp_username?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(l,{htmlFor:"smtp_password",children:"SMTP Password"}),s.jsx(o,{id:"smtp_password",type:"password",value:a.smtp_password,onChange:e=>r("smtp_password",e.target.value),placeholder:"Your app password",className:"mt-1 block w-full",autoComplete:"current-password"}),s.jsx(i,{message:t.smtp_password?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(l,{htmlFor:"smtp_encryption",children:"Encryption"}),s.jsxs(N,{value:a.smtp_encryption,onValueChange:e=>r("smtp_encryption",e),children:[s.jsx(w,{className:"mt-1 block w-full",children:s.jsx(b,{})}),s.jsxs(T,{children:[s.jsx(f,{value:"tls",children:"TLS"}),s.jsx(f,{value:"ssl",children:"SSL"}),s.jsx(f,{value:"none",children:"None"})]})]}),s.jsx(i,{message:t.smtp_encryption?.[0]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(l,{htmlFor:"mail_from_address",children:"From Email"}),s.jsx(o,{id:"mail_from_address",type:"email",value:a.mail_from_address,onChange:e=>r("mail_from_address",e.target.value),placeholder:"noreply@yoursite.com",className:"mt-1 block w-full"}),s.jsx(i,{message:t.mail_from_address?.[0]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(l,{htmlFor:"mail_from_name",children:"From Name"}),s.jsx(o,{id:"mail_from_name",value:a.mail_from_name,onChange:e=>r("mail_from_name",e.target.value),placeholder:"Your Company",className:"mt-1 block w-full"}),s.jsx(i,{message:t.mail_from_name?.[0]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(x,{type:"submit",disabled:d,children:d?"Saving...":"Save"}),s.jsx(z,{})]})]})]})})]})}export{rs as default};
